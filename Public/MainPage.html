<!DOCTYPE html>
<html>
<head>
    <title>Fő oldal</title>
    <link rel="stylesheet" href="MainPage.css">
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
  </head>
  <body>
      <!-- Navigation bar -->
      <div class="navbar">
          <div>
          </div>
          <div>
            <a class="button back-button" href="Profile.html" style="text-decoration: none;">Profil</a> <!-- Added button to go back to the main page -->
              <button id="logoutButton" class="button">Kijelentkezés</button>
          </div>
      </div>
  
      <!-- Main content -->
      <div class="filter-container">
        <h2>Kategória szűrés</h2>
        <select class="filter">
            <option value="category1">Category 1</option>
            <option value="category2">Category 2</option>
            <option value="category3">Category 3</option>
            <!-- Add more categories as needed -->
        </select>
    </div>
      <div class="main-content">
          <!-- Feed -->
          <div class="feed" id="viccfeed">
          </div>
  
          <!-- Filter -->
          
      </div>
      
      
    <script src="MainPage.js"></script>

    <script>
      // Get the URL parameter (if any) for a successful login
      const urlParams = new URLSearchParams(window.location.search);
      const loginSuccess = urlParams.get('loginSuccess');

      if (loginSuccess === 'true') {
          alert('Sikeres bejelentkezés!'); // Display an alert
      }

      const urlParams2 = new URLSearchParams(window.location.search);
      const addSuccess = urlParams2.get('addSuccess');

      if (addSuccess === 'true'){
        alert('Sikeresen hozzáadtad a viccet!');
      }

      fetch('/api/data')
  .then(response => response.json())
  .then(data => {
    const viccfeed = document.getElementById('viccfeed');

    // Clear any existing content in viccfeed
    viccfeed.innerHTML = '';

    // Iterate through the data and append jokes with spacing
    data.forEach((item, index) => {
      const jokeParagraph = document.createElement('p');

      // Access the "vicc_tartalom" property and set it as the text content
      jokeParagraph.textContent = item.vicc_tartalom;

      viccfeed.appendChild(jokeParagraph);

      // Add a line break after each joke, except for the last one
      if (index < data.length - 1) {
        viccfeed.appendChild(document.createElement('br'));
      }
    });
  })
  .catch(error => console.error('Fetch error:', error));
  </script>
  </body>
  </html>
  